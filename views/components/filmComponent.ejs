<% if (locals.order === "reverse") { %>
    <% for( let index = filmCategory.length - 1; 0 <= index && filmCategory.length - 20 <=  index; index-- ) { %>
        <% if (filmCategory[index].poster_path && filmCategory[index].release_date) { %>
            <div class="smallFilmComponent">
                <a href="/film/<%= filmCategory[index].id %> ">
                    <% if (filmCategory[index].poster_path) { %>
                        <img class="smallFilmPoster" src="https://image.tmdb.org/t/p/w400<%= filmCategory[index].poster_path %>" alt="" loading="lazy">
                    <% } else { %>
                        <img class="smallFilmPoster" src="/images/noposter.jpeg" alt="" loading="lazy">
                    <% } %>
                </a>
                <% if (locals.collectionComponent) { %>
                    <form action="/collections/<%= collectionFilms[index].id %>/remove?_method=DELETE" method="POST" class="deleteForm">
                        <button type="submit" name="collectionID" value="<%= collection._id %>" class="roundButton deleteButton">
                            <span class="material-icons">delete</span>
                        </button>
                    </form>
                <% } %>
                <div class="buttonsWrapper smallButtonsWrapper">
                    <div class="ratingWrapper smallRatingWrapper" style="display: none;">
                        <div data-title="masterpiece" data-img="ğŸ¾" class="ratingComponent smallratingComponent"><div class="tooltiptext smallTooltiptext">Masterpiece</div>ğŸ¾</div>
                        <div data-title="excellent" data-img="ğŸ‘" class="ratingComponent smallratingComponent"><span class="tooltiptext smallTooltiptext">Excellent</span>ğŸ‘</div>
                        <div data-title="goodMoment" data-img="ğŸ‘" class="ratingComponent smallratingComponent"><span class="tooltiptext smallTooltiptext">Correct</span>ğŸ‘</div>
                        <div data-title="disapointing" data-img="ğŸ‘" class="ratingComponent smallratingComponent"><span class="tooltiptext smallTooltiptext">Disapointing</span>ğŸ‘</div>
                        <div data-title="purge" data-img="ğŸ¥±" class="ratingComponent smallratingComponent"><span class="tooltiptext smallTooltiptext">Dud</span>ğŸ¥±</div>
                        <div idata-title="nanar" data-img="ğŸ’¸" class="ratingComponent smallratingComponent"><span class="tooltiptext smallTooltiptext">Nanar</span>ğŸ’¸</div>
                    </div>
                    <button class="ratingButton roundButton smallRoundButton" type="submit">
                        <span class="material-icons-outlined">grade</span>
                    </button>
                    <% if (watchlist.some(e => e.id === filmCategory[index].id )) { %>
                        <button type="button" class="watchlistButton removeWatchlistButton roundButton smallRoundButton" data-id="<%= filmCategory[index].id  %>" data-title="<%= filmCategory[index].title  %>" data-release="<%= filmCategory[index].release_date.slice(0,4) %>" data-poster="<%= filmCategory[index].poster_path %>">
                            <span class="material-icons favorite">bookmark_added</span>
                        </button>
                    <% } else { %>
                        <button type="button" class="watchlistButton addWatchlistButton roundButton smallRoundButton" data-id="<%= filmCategory[index].id  %>" data-title="<%= filmCategory[index].title  %>" data-release="<%= filmCategory[index].release_date.slice(0,4) %>" data-poster="<%= filmCategory[index].poster_path %>">
                            <span class="material-icons">bookmark_border</span>
                        </button>
                    <% } %>
                </div>
                
            </div>
        <% } %>
    <% } %>
<% } else { %>
    <% for( let index = 0; index < filmCategory.length && index < 20; index++ ) { %>
        <% if (filmCategory[index].poster_path && filmCategory[index].release_date) { %>
            <div class="smallFilmComponent">
                <a href="/film/<%= filmCategory[index].id %> ">
                    <% if (filmCategory[index].poster_path) { %>
                        <img class="smallFilmPoster" src="https://image.tmdb.org/t/p/w400<%= filmCategory[index].poster_path %>" alt="" loading="lazy">
                    <% } else { %>
                        <img class="smallFilmPoster" src="/images/noposter.jpeg" alt="" loading="lazy">
                    <% } %>
                </a>
                <% if (locals.collectionComponent) { %>
                    <form action="/collections/<%= collectionFilms[index].id %>/remove?_method=DELETE" method="POST" class="deleteForm">
                        <button type="submit" name="collectionID" value="<%= collection._id %>" class="roundButton deleteButton">
                            <span class="material-icons">delete</span>
                        </button>
                    </form>
                <% } %>
                <div class="buttonsWrapper smallButtonsWrapper">
                    <div class="ratingWrapper smallRatingWrapper" style="display: none;">
                        <div data-title="masterpiece" data-img="ğŸ¾" class="ratingComponent smallratingComponent"><div class="tooltiptext smallTooltiptext">Masterpiece</div>ğŸ¾</div>
                        <div data-title="excellent" data-img="ğŸ‘" class="ratingComponent smallratingComponent"><span class="tooltiptext smallTooltiptext">Excellent</span>ğŸ‘</div>
                        <div data-title="goodMoment" data-img="ğŸ‘" class="ratingComponent smallratingComponent"><span class="tooltiptext smallTooltiptext">Correct</span>ğŸ‘</div>
                        <div data-title="disapointing" data-img="ğŸ‘" class="ratingComponent smallratingComponent"><span class="tooltiptext smallTooltiptext">Disapointing</span>ğŸ‘</div>
                        <div data-title="purge" data-img="ğŸ¥±" class="ratingComponent smallratingComponent"><span class="tooltiptext smallTooltiptext">Dud</span>ğŸ¥±</div>
                        <div idata-title="nanar" data-img="ğŸ’¸" class="ratingComponent smallratingComponent"><span class="tooltiptext smallTooltiptext">Nanar</span>ğŸ’¸</div>
                    </div>
                    <button class="ratingButton roundButton smallRoundButton" type="submit">
                        <span class="material-icons-outlined">grade</span>
                    </button>
                    <% if (watchlist.some(e => e.id === filmCategory[index].id )) { %>
                        <button type="button" class="watchlistButton removeWatchlistButton roundButton smallRoundButton" data-id="<%= filmCategory[index].id  %>" data-title="<%= filmCategory[index].title  %>" data-release="<%= filmCategory[index].release_date.slice(0,4) %>" data-poster="<%= filmCategory[index].poster_path %>">
                            <span class="material-icons favorite">bookmark_added</span>
                        </button>
                    <% } else { %>
                        <button type="button" class="watchlistButton addWatchlistButton roundButton smallRoundButton" data-id="<%= filmCategory[index].id  %>" data-title="<%= filmCategory[index].title  %>" data-release="<%= filmCategory[index].release_date.slice(0,4) %>" data-poster="<%= filmCategory[index].poster_path %>">
                            <span class="material-icons">bookmark_border</span>
                        </button>
                    <% } %>
                </div>
                
            </div>
        <% } %>
    <% } %>
<% } %>